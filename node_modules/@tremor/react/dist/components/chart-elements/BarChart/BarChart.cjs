'use client';
"use strict";var e=require("tslib"),t=require("../../../lib/constants.cjs"),a=require("../../../lib/theme.cjs"),l=require("../../../lib/tremorTwMerge.cjs"),r=require("../../../lib/utils.cjs"),o=require("react"),i=require("recharts"),n=require("../common/ChartLegend.cjs"),s=require("../common/ChartTooltip.cjs"),c=require("../common/NoData.cjs"),d=require("../common/utils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(o);const v=m.default.forwardRef(((u,v)=>{const{data:f=[],categories:g=[],index:h,colors:y=a.themeColorRange,valueFormatter:p=r.defaultValueFormatter,layout:k="horizontal",stack:b=!1,relative:w=!1,startEndOnly:x=!1,animationDuration:E=900,showAnimation:T=!1,showXAxis:C=!0,showYAxis:j=!0,yAxisWidth:A=56,intervalType:q="equidistantPreserveStart",showTooltip:L=!0,showLegend:O=!0,showGridLines:N=!0,autoMinValue:D=!1,minValue:M,maxValue:V,allowDecimals:S=!0,noDataText:F,onValueChange:G,customTooltip:K,className:B}=u,P=e.__rest(u,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","intervalType","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","customTooltip","className"]),Y=K,[z,X]=o.useState(60),R=d.constructCategoryColors(g,y),[W,_]=m.default.useState(void 0),[I,$]=o.useState(void 0),H=!!G;function J(e,t,a){var l,r,o,i;a.stopPropagation(),G&&(d.deepEqual(W,Object.assign(Object.assign({},e.payload),{value:e.value}))?($(void 0),_(void 0),null==G||G(null)):($(null===(r=null===(l=e.tooltipPayload)||void 0===l?void 0:l[0])||void 0===r?void 0:r.dataKey),_(Object.assign(Object.assign({},e.payload),{value:e.value})),null==G||G(Object.assign({eventType:"bar",categoryClicked:null===(i=null===(o=e.tooltipPayload)||void 0===o?void 0:o[0])||void 0===i?void 0:i.dataKey},e.payload))))}const Q=d.getYAxisDomain(D,M,V);return m.default.createElement("div",Object.assign({ref:v,className:l.tremorTwMerge("w-full h-80",B)},P),m.default.createElement(i.ResponsiveContainer,{className:"h-full w-full"},(null==f?void 0:f.length)?m.default.createElement(i.BarChart,{data:f,stackOffset:b?"sign":w?"expand":"none",layout:"vertical"===k?"vertical":"horizontal",onClick:H&&(I||W)?()=>{_(void 0),$(void 0),null==G||G(null)}:void 0},N?m.default.createElement(i.CartesianGrid,{className:l.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==k,vertical:"vertical"===k}):null,"vertical"!==k?m.default.createElement(i.XAxis,{padding:{left:20,right:20},hide:!C,dataKey:h,interval:x?"preserveStartEnd":q,tick:{transform:"translate(0, 6)"},ticks:x?[f[0][h],f[f.length-1][h]]:void 0,fill:"",stroke:"",className:l.tremorTwMerge("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1}):m.default.createElement(i.XAxis,{hide:!C,type:"number",tick:{transform:"translate(-3, 0)"},domain:Q,fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:p,minTickGap:5,allowDecimals:S}),"vertical"!==k?m.default.createElement(i.YAxis,{width:A,hide:!j,axisLine:!1,tickLine:!1,type:"number",domain:Q,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:w?e=>`${(100*e).toString()} %`:p,allowDecimals:S}):m.default.createElement(i.YAxis,{width:A,hide:!j,dataKey:h,axisLine:!1,tickLine:!1,ticks:x?[f[0][h],f[f.length-1][h]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")}),m.default.createElement(i.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:L?({active:e,payload:a,label:l})=>Y?m.default.createElement(Y,{payload:null==a?void 0:a.map((e=>{var a;return Object.assign(Object.assign({},e),{color:null!==(a=R.get(e.dataKey))&&void 0!==a?a:t.BaseColors.Gray})})),active:e,label:l}):m.default.createElement(s.default,{active:e,payload:a,label:l,valueFormatter:p,categoryColors:R}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),O?m.default.createElement(i.Legend,{verticalAlign:"top",height:z,content:({payload:e})=>n({payload:e},R,X,I,H?e=>{return t=e,void(H&&(t!==I||W?($(t),null==G||G({eventType:"category",categoryClicked:t})):($(void 0),null==G||G(null)),_(void 0)));var t}:void 0)}):null,g.map((e=>{var o;return m.default.createElement(i.Bar,{className:l.tremorTwMerge(r.getColorClassNames(null!==(o=R.get(e))&&void 0!==o?o:t.BaseColors.Gray,a.colorPalette.background).fillColor,G?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:b||w?"a":void 0,dataKey:e,fill:"",isAnimationActive:T,animationDuration:E,shape:e=>((e,t,a,l)=>{const{fillOpacity:r,name:o,payload:i,value:n}=e;let{x:s,width:c,y:u,height:v}=e;return"horizontal"===l&&v<0?(u+=v,v=Math.abs(v)):"vertical"===l&&c<0&&(s+=c,c=Math.abs(c)),m.default.createElement("rect",{x:s,y:u,width:c,height:v,opacity:t||a&&a!==o?d.deepEqual(t,Object.assign(Object.assign({},i),{value:n}))?r:.3:r})})(e,W,I,k),onClick:J})}))):m.default.createElement(c,{noDataText:F})))}));v.displayName="BarChart",module.exports=v;
