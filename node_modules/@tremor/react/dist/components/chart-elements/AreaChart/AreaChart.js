'use client';
import{__rest as e}from"tslib";import t,{useState as o,Fragment as a}from"react";import{ResponsiveContainer as r,AreaChart as n,CartesianGrid as l,XAxis as i,YAxis as s,Tooltip as c,Legend as d,Area as m,Dot as u,Line as p}from"recharts";import k from"../common/ChartLegend.js";import y from"../common/ChartTooltip.js";import v from"../common/NoData.js";import{constructCategoryColors as h,hasOnlyOneValueForThisKey as f,getYAxisDomain as g}from"../common/utils.js";import{BaseColors as x}from"../../../lib/constants.js";import{themeColorRange as E,colorPalette as w}from"../../../lib/theme.js";import{tremorTwMerge as C}from"../../../lib/tremorTwMerge.js";import{getColorClassNames as b,defaultValueFormatter as L}from"../../../lib/utils.js";const N=t.forwardRef(((N,T)=>{const{data:j=[],categories:K=[],index:A,stack:G=!1,colors:D=E,valueFormatter:O=L,startEndOnly:W=!1,showXAxis:V=!0,showYAxis:F=!0,yAxisWidth:M=56,intervalType:P="equidistantPreserveStart",showAnimation:S=!1,animationDuration:X=900,showTooltip:Y=!0,showLegend:q=!0,showGridLines:z=!0,showGradient:I=!0,autoMinValue:R=!1,curveType:$="linear",minValue:B,maxValue:H,connectNulls:J=!1,allowDecimals:Q=!0,noDataText:U,className:Z,onValueChange:_,customTooltip:ee}=N,te=e(N,["data","categories","index","stack","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","showAnimation","animationDuration","showTooltip","showLegend","showGridLines","showGradient","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","customTooltip"]),oe=ee,[ae,re]=o(60),[ne,le]=o(void 0),[ie,se]=o(void 0),ce=h(K,D),de=g(R,B,H),me=!!_;function ue(e){me&&(e===ie&&!ne||f(j,e)&&ne&&ne.dataKey===e?(se(void 0),null==_||_(null)):(se(e),null==_||_({eventType:"category",categoryClicked:e})),le(void 0))}return t.createElement("div",Object.assign({ref:T,className:C("w-full h-80",Z)},te),t.createElement(r,{className:"h-full w-full"},(null==j?void 0:j.length)?t.createElement(n,{data:j,onClick:me&&(ie||ne)?()=>{le(void 0),se(void 0),null==_||_(null)}:void 0},z?t.createElement(l,{className:C("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,t.createElement(i,{padding:{left:20,right:20},hide:!V,dataKey:A,tick:{transform:"translate(0, 6)"},ticks:W?[j[0][A],j[j.length-1][A]]:void 0,fill:"",stroke:"",className:C("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),interval:W?"preserveStartEnd":P,tickLine:!1,axisLine:!1,minTickGap:5}),t.createElement(s,{width:M,hide:!F,axisLine:!1,tickLine:!1,type:"number",domain:de,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:C("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:O,allowDecimals:Q}),t.createElement(c,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:Y?({active:e,payload:o,label:a})=>oe?t.createElement(oe,{payload:null==o?void 0:o.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=ce.get(e.dataKey))&&void 0!==t?t:x.Gray})})),active:e,label:a}):t.createElement(y,{active:e,payload:o,label:a,valueFormatter:O,categoryColors:ce}):t.createElement(t.Fragment,null),position:{y:0}}),q?t.createElement(d,{verticalAlign:"top",height:ae,content:({payload:e})=>k({payload:e},ce,re,ie,me?e=>ue(e):void 0)}):null,K.map((e=>{var o,a;return t.createElement("defs",{key:e},I?t.createElement("linearGradient",{className:b(null!==(o=ce.get(e))&&void 0!==o?o:x.Gray,w.text).textColor,id:ce.get(e),x1:"0",y1:"0",x2:"0",y2:"1"},t.createElement("stop",{offset:"5%",stopColor:"currentColor",stopOpacity:ne||ie&&ie!==e?.15:.4}),t.createElement("stop",{offset:"95%",stopColor:"currentColor",stopOpacity:0})):t.createElement("linearGradient",{className:b(null!==(a=ce.get(e))&&void 0!==a?a:x.Gray,w.text).textColor,id:ce.get(e),x1:"0",y1:"0",x2:"0",y2:"1"},t.createElement("stop",{stopColor:"currentColor",stopOpacity:ne||ie&&ie!==e?.1:.3})))})),K.map((e=>{var o;return t.createElement(m,{className:b(null!==(o=ce.get(e))&&void 0!==o?o:x.Gray,w.text).strokeColor,strokeOpacity:ne||ie&&ie!==e?.3:1,activeDot:e=>{var o;const{cx:a,cy:r,stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,dataKey:c}=e;return t.createElement(u,{className:C("stroke-tremor-background dark:stroke-dark-tremor-background",_?"cursor-pointer":"",b(null!==(o=ce.get(c))&&void 0!==o?o:x.Gray,w.text).fillColor),cx:a,cy:r,r:5,fill:"",stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,onClick:(t,o)=>function(e,t){t.stopPropagation(),me&&(e.index===(null==ne?void 0:ne.index)&&e.dataKey===(null==ne?void 0:ne.dataKey)||f(j,e.dataKey)&&ie&&ie===e.dataKey?(se(void 0),le(void 0),null==_||_(null)):(se(e.dataKey),le({index:e.index,dataKey:e.dataKey}),null==_||_(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,o)})},dot:o=>{var r;const{stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,cx:c,cy:d,dataKey:m,index:p}=o;return f(j,e)&&!(ne||ie&&ie!==e)||(null==ne?void 0:ne.index)===p&&(null==ne?void 0:ne.dataKey)===e?t.createElement(u,{key:p,cx:c,cy:d,r:5,stroke:n,fill:"",strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,className:C("stroke-tremor-background dark:stroke-dark-tremor-background",_?"cursor-pointer":"",b(null!==(r=ce.get(m))&&void 0!==r?r:x.Gray,w.text).fillColor)}):t.createElement(a,{key:p})},key:e,name:e,type:$,dataKey:e,stroke:"",fill:`url(#${ce.get(e)})`,strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:S,animationDuration:X,stackId:G?"a":void 0,connectNulls:J})})),_?K.map((e=>t.createElement(p,{className:C("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:$,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:J,onClick:(e,t)=>{t.stopPropagation();const{name:o}=e;ue(o)}}))):null):t.createElement(v,{noDataText:U})))}));N.displayName="AreaChart";export{N as default};
