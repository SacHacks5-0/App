'use client';
import{__rest as e}from"tslib";import t,{useState as a}from"react";import{ResponsiveContainer as o,ScatterChart as l,CartesianGrid as r,XAxis as i,YAxis as n,Tooltip as s,ZAxis as m,Scatter as c,Legend as d,Dot as u}from"recharts";import v from"../common/ChartLegend.js";import p from"./ScatterChartTooltip.js";import y from"../common/NoData.js";import{constructCategories as h,constructCategoryColors as f,deepEqual as g,getYAxisDomain as w}from"../common/utils.js";import{BaseColors as x}from"../../../lib/constants.js";import{themeColorRange as k,colorPalette as b}from"../../../lib/theme.js";import{tremorTwMerge as E}from"../../../lib/tremorTwMerge.js";import{getColorClassNames as T,defaultValueFormatter as V}from"../../../lib/utils.js";const A=t.forwardRef(((A,C)=>{const{data:j=[],x:D,y:O,size:N,category:L,colors:X=k,showOpacity:Y=!1,sizeRange:z=[1,1e3],valueFormatter:S={x:V,y:V,size:V},startEndOnly:F=!1,showXAxis:G=!0,showYAxis:M=!0,yAxisWidth:K=56,intervalType:R="equidistantPreserveStart",animationDuration:W=900,showAnimation:P=!1,showTooltip:q=!0,showLegend:$=!0,showGridLines:B=!0,autoMinXValue:H=!1,minXValue:I,maxXValue:J,autoMinYValue:Q=!1,minYValue:U,maxYValue:Z,allowDecimals:_=!0,noDataText:ee,onValueChange:te,customTooltip:ae,className:oe}=A,le=e(A,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","noDataText","onValueChange","customTooltip","className"]),re=ae,[ie,ne]=a(60),[se,me]=t.useState(void 0),[ce,de]=a(void 0),ue=!!te;function ve(e,t,a){a.stopPropagation(),ue&&(g(se,e.node)?(de(void 0),me(void 0),null==te||te(null)):(me(e.node),de(e.payload[L]),null==te||te(Object.assign({eventType:"bubble",categoryClicked:e.payload[L]},e.payload))))}const pe=h(j,L),ye=f(pe,X),he=w(H,I,J),fe=w(Q,U,Z);return t.createElement("div",Object.assign({ref:C,className:E("w-full h-80",oe)},le),t.createElement(o,{className:"h-full w-full"},(null==j?void 0:j.length)?t.createElement(l,{onClick:ue&&(ce||se)?()=>{me(void 0),de(void 0),null==te||te(null)}:void 0,margin:{left:20,right:20}},B?t.createElement(r,{className:E("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,D?t.createElement(i,{hide:!G,dataKey:D,interval:F?"preserveStartEnd":R,tick:{transform:"translate(0, 6)"},ticks:F?[j[0][D],j[j.length-1][D]]:void 0,type:"number",name:D,fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:S.x,axisLine:!1,minTickGap:5,domain:he,allowDataOverflow:!0}):null,O?t.createElement(n,{width:K,hide:!M,axisLine:!1,tickLine:!1,dataKey:O,type:"number",name:O,domain:fe,tick:{transform:"translate(-3, 0)"},tickFormatter:S.y,fill:"",stroke:"",className:E("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:_,allowDataOverflow:!0}):null,t.createElement(s,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:q?({active:e,payload:a,label:o})=>{var l,r,i,n;return re?t.createElement(re,{payload:null==a?void 0:a.map((e=>{var t,l,r;return Object.assign(Object.assign({},e),{color:null!==(r=ye.get(L?null===(l=null===(t=null==a?void 0:a[0])||void 0===t?void 0:t.payload)||void 0===l?void 0:l[L]:o))&&void 0!==r?r:x.Gray})})),active:e,label:L?null===(r=null===(l=null==a?void 0:a[0])||void 0===l?void 0:l.payload)||void 0===r?void 0:r[L]:o}):t.createElement(p,{active:e,payload:a,label:L?null===(n=null===(i=null==a?void 0:a[0])||void 0===i?void 0:i.payload)||void 0===n?void 0:n[L]:o,valueFormatter:S,axis:{x:D,y:O,size:N},category:L,categoryColors:ye})}:t.createElement(t.Fragment,null)}),N?t.createElement(m,{dataKey:N,type:"number",range:z,name:N}):null,pe.map((e=>{var a,o;return t.createElement(c,{className:E(T(null!==(a=ye.get(e))&&void 0!==a?a:x.Gray,b.text).fillColor,Y?T(null!==(o=ye.get(e))&&void 0!==o?o:x.Gray,b.text).strokeColor:"",te?"cursor-pointer":""),fill:`url(#${ye.get(e)})`,fillOpacity:Y?.7:1,key:e,name:e,data:L?j.filter((t=>t[L]===e)):j,isAnimationActive:P,animationDuration:W,shape:e=>((e,a,o)=>{const{cx:l,cy:r,width:i,node:n,fillOpacity:s,name:m}=e;return t.createElement(u,{cx:l,cy:r,r:i/2,opacity:a||o&&o!==m?g(a,n)?s:.3:s})})(e,se,ce),onClick:ve})})),$?t.createElement(d,{verticalAlign:"top",height:ie,content:({payload:e})=>v({payload:e},ye,ne,ce,ue?e=>{return t=e,void(ue&&(t!==ce||se?(de(t),null==te||te({eventType:"category",categoryClicked:t})):(de(void 0),null==te||te(null)),me(void 0)));var t}:void 0)}):null):t.createElement(y,{noDataText:ee})))}));A.displayName="ScatterChart";export{A as default};
