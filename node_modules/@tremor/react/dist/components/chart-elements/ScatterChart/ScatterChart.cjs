'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),l=require("../common/ChartLegend.cjs"),o=require("./ScatterChartTooltip.cjs"),r=require("../common/NoData.cjs"),i=require("../common/utils.cjs"),n=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),u=require("../../../lib/tremorTwMerge.cjs"),d=require("../../../lib/utils.cjs");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=c(t);const v=m.default.forwardRef(((c,v)=>{const{data:y=[],x:f,y:p,size:g,category:h,colors:w=s.themeColorRange,showOpacity:x=!1,sizeRange:k=[1,1e3],valueFormatter:C={x:d.defaultValueFormatter,y:d.defaultValueFormatter,size:d.defaultValueFormatter},startEndOnly:b=!1,showXAxis:E=!0,showYAxis:T=!0,yAxisWidth:A=56,intervalType:V="equidistantPreserveStart",animationDuration:D=900,showAnimation:q=!1,showTooltip:j=!0,showLegend:N=!0,showGridLines:O=!0,autoMinXValue:Y=!1,minXValue:L,maxXValue:M,autoMinYValue:S=!1,minYValue:F,maxYValue:X,allowDecimals:z=!0,noDataText:G,onValueChange:R,customTooltip:P,className:B}=c,K=e.__rest(c,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","noDataText","onValueChange","customTooltip","className"]),W=P,[_,Z]=t.useState(60),[$,H]=m.default.useState(void 0),[I,J]=t.useState(void 0),Q=!!R;function U(e,t,a){a.stopPropagation(),Q&&(i.deepEqual($,e.node)?(J(void 0),H(void 0),null==R||R(null)):(H(e.node),J(e.payload[h]),null==R||R(Object.assign({eventType:"bubble",categoryClicked:e.payload[h]},e.payload))))}const ee=i.constructCategories(y,h),te=i.constructCategoryColors(ee,w),ae=i.getYAxisDomain(Y,L,M),le=i.getYAxisDomain(S,F,X);return m.default.createElement("div",Object.assign({ref:v,className:u.tremorTwMerge("w-full h-80",B)},K),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==y?void 0:y.length)?m.default.createElement(a.ScatterChart,{onClick:Q&&(I||$)?()=>{H(void 0),J(void 0),null==R||R(null)}:void 0,margin:{left:20,right:20}},O?m.default.createElement(a.CartesianGrid,{className:u.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,f?m.default.createElement(a.XAxis,{hide:!E,dataKey:f,interval:b?"preserveStartEnd":V,tick:{transform:"translate(0, 6)"},ticks:b?[y[0][f],y[y.length-1][f]]:void 0,type:"number",name:f,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:C.x,axisLine:!1,minTickGap:5,domain:ae,allowDataOverflow:!0}):null,p?m.default.createElement(a.YAxis,{width:A,hide:!T,axisLine:!1,tickLine:!1,dataKey:p,type:"number",name:p,domain:le,tick:{transform:"translate(-3, 0)"},tickFormatter:C.y,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:z,allowDataOverflow:!0}):null,m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:j?({active:e,payload:t,label:a})=>{var l,r,i,s;return W?m.default.createElement(W,{payload:null==t?void 0:t.map((e=>{var l,o,r;return Object.assign(Object.assign({},e),{color:null!==(r=te.get(h?null===(o=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.payload)||void 0===o?void 0:o[h]:a))&&void 0!==r?r:n.BaseColors.Gray})})),active:e,label:h?null===(r=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.payload)||void 0===r?void 0:r[h]:a}):m.default.createElement(o.default,{active:e,payload:t,label:h?null===(s=null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.payload)||void 0===s?void 0:s[h]:a,valueFormatter:C,axis:{x:f,y:p,size:g},category:h,categoryColors:te})}:m.default.createElement(m.default.Fragment,null)}),g?m.default.createElement(a.ZAxis,{dataKey:g,type:"number",range:k,name:g}):null,ee.map((e=>{var t,l;return m.default.createElement(a.Scatter,{className:u.tremorTwMerge(d.getColorClassNames(null!==(t=te.get(e))&&void 0!==t?t:n.BaseColors.Gray,s.colorPalette.text).fillColor,x?d.getColorClassNames(null!==(l=te.get(e))&&void 0!==l?l:n.BaseColors.Gray,s.colorPalette.text).strokeColor:"",R?"cursor-pointer":""),fill:`url(#${te.get(e)})`,fillOpacity:x?.7:1,key:e,name:e,data:h?y.filter((t=>t[h]===e)):y,isAnimationActive:q,animationDuration:D,shape:e=>((e,t,l)=>{const{cx:o,cy:r,width:n,node:s,fillOpacity:u,name:d}=e;return m.default.createElement(a.Dot,{cx:o,cy:r,r:n/2,opacity:t||l&&l!==d?i.deepEqual(t,s)?u:.3:u})})(e,$,I),onClick:U})})),N?m.default.createElement(a.Legend,{verticalAlign:"top",height:_,content:({payload:e})=>l({payload:e},te,Z,I,Q?e=>{return t=e,void(Q&&(t!==I||$?(J(t),null==R||R({eventType:"category",categoryClicked:t})):(J(void 0),null==R||R(null)),H(void 0)));var t}:void 0)}):null):m.default.createElement(r,{noDataText:G})))}));v.displayName="ScatterChart",module.exports=v;
