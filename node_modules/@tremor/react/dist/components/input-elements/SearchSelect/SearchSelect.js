'use client';
import{__rest as e}from"tslib";import t from"../../../hooks/useInternalState.js";import r,{useState as a,useMemo as o}from"react";import{border as l}from"../../../lib/shape.js";import{sizing as n}from"../../../lib/sizing.js";import{spacing as d}from"../../../lib/spacing.js";import{tremorTwMerge as m}from"../../../lib/tremorTwMerge.js";import{makeClassName as s}from"../../../lib/utils.js";import{Combobox as i}from"@headlessui/react";import c from"../../../assets/ArrowDownHeadIcon.js";import u from"../../../assets/XCircleIcon.js";import{constructValueToNameMapping as b,getFilteredOptions as f,getSelectButtonColors as p,hasValue as h}from"../selectUtils.js";const g=s("SearchSelect"),k=s("SearchSelect"),w=r.forwardRef(((s,w)=>{const{defaultValue:x,value:v,onValueChange:N,placeholder:E="Select...",disabled:j=!1,icon:y,enableClear:C=!0,children:S,className:I}=s,V=e(s,["defaultValue","value","onValueChange","placeholder","disabled","icon","enableClear","children","className"]),[X,D]=a(""),[R,z]=t(x,v),B=y,L=o((()=>b(S)),[S]),O=o((()=>f(X,S)),[X,S]);return r.createElement(i,Object.assign({as:"div",ref:w,defaultValue:R,value:R,onChange:e=>{null==N||N(e),z(e)},disabled:j,className:m("w-full min-w-[10rem] relative text-tremor-default",I)},V),(({value:e})=>r.createElement(r.Fragment,null,r.createElement(i.Button,{className:"w-full"},B&&r.createElement("span",{className:m("absolute inset-y-0 left-0 flex items-center ml-px",d.md.paddingLeft)},r.createElement(B,{className:m(g("Icon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",n.lg.height,n.lg.width)})),r.createElement(i.Input,{className:m("w-full outline-none text-left whitespace-nowrap truncate rounded-tremor-default focus:ring-2 transition duration-100 text-tremor-default pr-14","border-tremor-border shadow-tremor-input focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",B?"p-10 -ml-0.5":d.lg.paddingLeft,d.sm.paddingY,l.sm.all,j?"placeholder:text-tremor-content-subtle dark:placeholder:text-tremor-content-subtle":"placeholder:text-tremor-content dark:placeholder:text-tremor-content",p(h(e),j)),placeholder:E,onChange:e=>D(e.target.value),displayValue:e=>{var t;return null!==(t=L.get(e))&&void 0!==t?t:""}}),r.createElement("div",{className:m("absolute inset-y-0 right-0 flex items-center",d.md.paddingRight)},r.createElement(c,{className:m(g("arrowDownIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",n.md.height,n.md.width)}))),C&&R?r.createElement("button",{type:"button",className:m("absolute inset-y-0 right-0 flex items-center",d.fourXl.marginRight),onClick:e=>{e.preventDefault(),z(""),D(""),null==N||N("")}},r.createElement(u,{className:m(k("clearIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",n.md.height,n.md.width)})):null,O.length>0&&r.createElement(i.Options,{className:m("absolute z-10 divide-y overflow-y-auto max-h-[228px] w-full left-0 outline-none rounded-tremor-default text-tremor-default","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",d.twoXs.marginTop,d.twoXs.marginBottom,l.sm.all)},O))))}));w.displayName="SearchSelect";export{w as default};
