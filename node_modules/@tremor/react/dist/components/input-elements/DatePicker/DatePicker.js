'use client';
import{__rest as e}from"tslib";import{border as r}from"../../../lib/shape.js";import{sizing as t}from"../../../lib/sizing.js";import{spacing as a}from"../../../lib/spacing.js";import{tremorTwMerge as o}from"../../../lib/tremorTwMerge.js";import n,{useMemo as l}from"react";import{startOfToday as d,startOfMonth as i}from"date-fns";import{enUS as s}from"date-fns/locale";import{Popover as m}from"@headlessui/react";import u from"../../../assets/CalendarIcon.js";import c from"../../../assets/XCircleIcon.js";import f from"../Calendar/Calendar.js";import{makeDatePickerClassName as b}from"./datePickerUtils.js";import p from"../../../hooks/useInternalState.js";import{formatSelectedDates as g}from"../DateRangePicker/dateRangePickerUtils.js";import{getSelectButtonColors as k,hasValue as h}from"../selectUtils.js";const w=d(),v=n.forwardRef(((d,v)=>{var x;const{value:N,defaultValue:j,onValueChange:C,minDate:y,maxDate:D,placeholder:E="Select date",disabled:R=!1,locale:X=s,enableClear:S=!0,displayFormat:O,className:P,enableYearNavigation:I=!1,weekStartsOn:V=0}=d,Y=e(d,["value","defaultValue","onValueChange","minDate","maxDate","placeholder","disabled","locale","enableClear","displayFormat","className","enableYearNavigation","weekStartsOn"]),[M,U]=p(j,N),z=l((()=>{const e=[];return y&&e.push({before:y}),D&&e.push({after:D}),e}),[y,D]),B=M?g(M,void 0,X,O):E,F=i(null!==(x=null!=M?M:D)&&void 0!==x?x:w),L=S&&!R;return n.createElement(m,Object.assign({ref:v,as:"div",className:o("relative w-full min-w-[10rem] text-tremor-default","focus:ring-2 focus:ring-tremor-brand-muted dark:focus:ring-dark-tremor-brand-muted",P)},Y),n.createElement(m.Button,{disabled:R,className:o("w-full outline-none text-left whitespace-nowrap truncate focus:ring-2 transition duration-100 rounded-tremor-default flex flex-nowrap","border-tremor-border shadow-tremor-input text-tremor-content-emphasis focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:text-dark-tremor-content-emphasis dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",a.lg.paddingLeft,L?a.fourXl.paddingRight:a.twoXl.paddingRight,a.sm.paddingY,r.sm.all,k(h(M),R))},n.createElement(u,{className:o(b("calendarIcon"),"flex-none shrink-0","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",t.lg.height,t.lg.width,a.threeXs.negativeMarginLeft,a.sm.marginRight),"aria-hidden":"true"}),n.createElement("p",{className:"truncate"},B)),L&&M?n.createElement("button",{type:"button",className:o("absolute outline-none inset-y-0 right-0 flex items-center transition duration-100",a.twoXl.marginRight),onClick:e=>{e.preventDefault(),null==C||C(void 0),U(void 0)}},n.createElement(c,{className:o("flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",t.md.height,t.md.width)})):null,n.createElement(m.Panel,{className:o("absolute z-10 divide-y overflow-y-auto min-w-min left-0 outline-none rounded-tremor-default p-3","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",a.twoXs.marginTop,a.twoXs.marginBottom,r.sm.all)},(({close:e})=>n.createElement(f,{showOutsideDays:!0,mode:"single",defaultMonth:F,selected:M,weekStartsOn:V,onSelect:r=>{null==C||C(r),U(r),e()},locale:X,disabled:z,enableYearNavigation:I}))))}));v.displayName="DatePicker";export{v as default};
